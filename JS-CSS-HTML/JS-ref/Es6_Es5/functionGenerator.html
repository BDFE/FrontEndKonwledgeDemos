<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>function * </title>
</head>
<body>
<script>
    //    1. 生成器语函数定义
    //    function* test(){}
    //    function * test(){}
    //    function *test(){}
    //    test = function* (){}
    //    test = function *(){}
    console.log('******************简单的function* 迭代器**********************')
    //    3.    必须调用生成器实例的next方法才会执行生成器函数体的代码

    function *say(msg) {
        console.log(msg)
    }
    var gen = say('hello world') // 没有显示hello world
    console.log(Object.prototype.toString.call(gen)) // 显示[object Generator]
    gen.next() // 显示hello world
    console.log('******************简单的yeild迭代器**********************')
    function *enumerableYeild(msg){
        console.log(msg)
        var msg1 = yield msg + '  after '
        console.log(msg1)
        var msg2 = yield msg1 + ' after'
        console.log(msg2 + ' over')
    }
    enumerableYeild("yeild").next()
    console.log('*******************************************************')


    function* enumerable(msg) {
        console.log(msg)
        var msg1 = yield msg + '  after '
        console.log(msg1)
        var msg2 = yield msg1 + ' after'
        try {
            var msg3 = yield msg2 + 'after'
            console.log('ok')
        }
        catch (e) {
            console.log(e)
        }
        console.log(msg2 + ' over')
    }

    // 初始化迭代器
    var enumerator = enumerable('hello')
    var ret = enumerator.next() // 控制台显示 hello，ret的值{value:'hello after',done:false}
    ret = enumerator.next('world') // 控制台显示 world，ret的值{value:'world after',done:false}\
    ret = enumerator.next('game') // 控制台显示game，ret的值{value:'game after',done:false}
    // 抛出异常信息
    ret = enumerator.throw(new Error('test')) // 控制台显示new Error('test')信息，然后显示game over。ret的值为{done:true}

    // for...of语句 enumerator = enumerable('hello')
    for (ret of enumerator)
        console.log(JSON.stringify(ret));
    // 控制台依次显示
    // hello
    // {value:'hello after',done:false}
    // world
    // {value:'world after',done:false}
    // {value:'game after',done:false}
    // game over
    // {done:true}
</script>

</body>
</html>