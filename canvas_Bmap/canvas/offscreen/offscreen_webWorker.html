<!DOCTYPE html>
<html>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    canvas {
        width: 100%;
        height: 100%;
        position: absolute;
    }
</style>

<head>
    <meta lang="'cn">
    <meta charset="utf-8">
    <title>WebGL测试</title>
</head>

<body onload="load()"> <canvas id="canvas"></canvas> </body>
<script>
    function wait(second) {
        console.log('wait')
        let st = new Date().valueOf();
        let diff = 0;
        while (diff < second * 1000) {
            console.log('.')
            t2 = new Date().valueOf();
            diff = t2 - st;
        }
    }

    function load() {
        var canvas = document.getElementById('canvas');
        if (('transferControlToOffscreen' in canvas)) {
            var offscreen = canvas.transferControlToOffscreen();
            var worker = new Worker("worker.js");
            worker.postMessage({
                canvas: offscreen
            }, [offscreen]);
            setInterval(() => {
                wait(1)
            }, 3000)
        } else {
            alert('不支持在线程中创建WebGL');
        }
    }
</script>

</html>