<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>元素</title>
    <script type="text/javascript" src="./elements.js"></script>
    <script type="text/javascript" src="./draw.js"></script>

</head>

<body>
    <div id="canvas-warp">
        <canvas id="canvas" style="border: 1px solid #aaaaaa; display: block; margin: 50px auto;">
            你的浏览器居然不支持Canvas？！赶快换一个吧！！
        </canvas>
    </div>

    <script>
        let ctx = init("canvas", 1050, 850)

        function getVirtueCanvas(picWidth = 100, picHeight = 200) {
            let vCanvas = document.createElement("CANVAS");
            vCanvas.width = picWidth;
            vCanvas.height = picHeight;
            let ctx = vCanvas.getContext("2d");
            var list = [];

            let sources = [{
                type: 'Dot',
                x: 40,
                y: 40,
                radius: 8,
                color: '#0f0'
            }, {
                type: 'ImageIcon',
                src: "../left&back.png",
                x: 30,
                y: 50,
                width: 20,
                height: 20,
                color: '#f00'
            }, {
                type: 'Line',
                x: 30,
                y: 50,
                toX: 30,
                toY: 160,
                lineWidth: 2,
                color: '#f00',
                options: {
                    dashed: true
                }
            }, {
                type: 'Line',
                x: 50,
                y: 50,
                toX: 50,
                toY: 160,
                lineWidth: 2,
                color: '#f00'
            }];

            list = addElements(sources, () => {
                startDraw(ctx, list);
            })

            function startDraw(ctx, list) {
                for (let e of list) {
                    e.draw(ctx);
                }
            }
            return vCanvas;
        }
        // let image = getVirtueCanvas();
        for (let i = 0; i < 4; i++) {
            // Rotated rectangle
            ctx.rotate(10 * Math.PI / 180);
            ctx.fillStyle = 'red'
            ctx.fillRect(100, 0, 80, 20);
        }
        ctx.setTransform(1, 0, 0, 1, 0, 0)
    </script>
</body>

</html>